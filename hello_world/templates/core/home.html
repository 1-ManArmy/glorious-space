{% extends 'base.html' %}
{% load static %}

{% block title %}Home - Developer Crown Site{% endblock %}

{% block extra_css %}
<style>
    .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 120px 0 80px;
        position: relative;
        overflow: hidden;
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="80" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="60" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        opacity: 0.3;
    }
    
    .hero-content {
        position: relative;
        z-index: 2;
    }
    
    .feature-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: none;
        border-radius: 15px;
        overflow: hidden;
    }
    
    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }
    
    .stats-section {
        background: #f8f9fa;
        padding: 60px 0;
    }
    
    .stat-item {
        text-align: center;
        padding: 20px;
    }
    
    .stat-number {
        font-size: 3rem;
        font-weight: bold;
        color: #667eea;
    }
    
    .tech-stack-item {
        transition: transform 0.3s ease;
        padding: 20px;
        text-align: center;
        border-radius: 10px;
        background: white;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .tech-stack-item:hover {
        transform: scale(1.05);
    }
    
    .canvas-preview {
        height: 200px;
        border-radius: 10px;
        overflow: hidden;
        position: relative;
    }
    
    .canvas-preview canvas {
        width: 100%;
        height: 100%;
    }
    
    .floating-elements {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
    }
    
    .floating-icon {
        position: absolute;
        font-size: 2rem;
        opacity: 0.1;
        animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-20px); }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="floating-elements">
        <i class="fas fa-code floating-icon" style="top: 20%; left: 10%; animation-delay: 0s;"></i>
        <i class="fas fa-cube floating-icon" style="top: 60%; left: 85%; animation-delay: 2s;"></i>
        <i class="fas fa-palette floating-icon" style="top: 80%; left: 20%; animation-delay: 4s;"></i>
        <i class="fas fa-rocket floating-icon" style="top: 30%; left: 80%; animation-delay: 1s;"></i>
        <i class="fas fa-crown floating-icon" style="top: 10%; left: 50%; animation-delay: 3s;"></i>
    </div>
    
    <div class="container hero-content">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    Build Your <span class="text-warning">Crown</span><br>
                    In The Developer Kingdom
                </h1>
                <p class="lead mb-4">
                    The ultimate platform for developers to showcase skills, collaborate in real-time, 
                    and create amazing projects with cutting-edge 2D/3D/4D canvas, 5G integration, 
                    and advanced visualization tools.
                </p>
                <div class="d-flex gap-3 flex-wrap">
                    <a href="{% url 'core:canvas_playground' %}" class="btn btn-warning btn-lg">
                        <i class="fas fa-paint-brush me-2"></i>Start Creating
                    </a>
                    <a href="{% url 'core:projects' %}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-eye me-2"></i>Explore Projects
                    </a>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="canvas-preview">
                    <canvas id="heroCanvas" width="500" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number">{{ total_developers }}</div>
                    <h5>Active Developers</h5>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number">{{ total_projects }}</div>
                    <h5>Amazing Projects</h5>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number">4</div>
                    <h5>Canvas Dimensions</h5>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number">5G</div>
                    <h5>Real-time Speed</h5>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Powerful Features</h2>
            <p class="lead text-muted">Everything you need to build extraordinary developer experiences</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="card feature-card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-draw-polygon fa-3x text-primary"></i>
                        </div>
                        <h5 class="card-title">2D Canvas</h5>
                        <p class="card-text">
                            Interactive 2D drawing with real-time collaboration, 
                            advanced tools, and seamless sharing capabilities.
                        </p>
                        <a href="{% url 'core:canvas_playground' %}?type=2d" class="btn btn-outline-primary">
                            Try 2D Canvas
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card feature-card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-cube fa-3x text-success"></i>
                        </div>
                        <h5 class="card-title">3D WebGL</h5>
                        <p class="card-text">
                            Powerful 3D rendering with Three.js, interactive objects, 
                            lighting, and physics for immersive experiences.
                        </p>
                        <a href="{% url 'core:canvas_playground' %}?type=3d" class="btn btn-outline-success">
                            Explore 3D
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card feature-card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-atom fa-3x text-warning"></i>
                        </div>
                        <h5 class="card-title">4D Simulation</h5>
                        <p class="card-text">
                            Advanced 4D visualizations and simulations for 
                            complex data representation and scientific modeling.
                        </p>
                        <a href="{% url 'core:canvas_playground' %}?type=4d" class="btn btn-outline-warning">
                            Enter 4D
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card feature-card h-100">
                    <div class="card-body text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-broadcast-tower fa-3x text-danger"></i>
                        </div>
                        <h5 class="card-title">5G Real-time</h5>
                        <p class="card-text">
                            Ultra-low latency real-time collaboration with 
                            WebRTC, edge computing, and 5G integration.
                        </p>
                        <a href="{% url 'core:canvas_playground' %}?type=5g" class="btn btn-outline-danger">
                            Go Real-time
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Projects -->
{% if featured_projects %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Featured Projects</h2>
            <p class="lead text-muted">Discover amazing projects built by our community</p>
        </div>
        
        <div class="row g-4">
            {% for project in featured_projects %}
            <div class="col-lg-4 col-md-6">
                <div class="card feature-card h-100">
                    {% if project.canvas_data.preview_image %}
                        <img src="{{ project.canvas_data.preview_image }}" class="card-img-top" alt="{{ project.name }}">
                    {% else %}
                        <div class="card-img-top bg-primary d-flex align-items-center justify-content-center" style="height: 200px;">
                            <i class="fas fa-project-diagram fa-3x text-white"></i>
                        </div>
                    {% endif %}
                    
                    <div class="card-body">
                        <h5 class="card-title">{{ project.name }}</h5>
                        <p class="card-text">{{ project.description|truncatewords:20 }}</p>
                        
                        <div class="d-flex flex-wrap gap-1 mb-3">
                            {% for tech in project.technologies|slice:":3" %}
                                <span class="badge bg-secondary">{{ tech }}</span>
                            {% endfor %}
                        </div>
                        
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted">
                                <i class="fas fa-user"></i> {{ project.owner.username }}
                            </small>
                            <small class="text-muted">
                                <i class="fas fa-eye"></i> {{ project.views_count }}
                                <i class="fas fa-heart ms-2"></i> {{ project.likes_count }}
                            </small>
                        </div>
                    </div>
                    
                    <div class="card-footer bg-transparent">
                        <a href="{% url 'core:project_detail' project.id %}" class="btn btn-primary w-100">
                            View Project
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-4">
            <a href="{% url 'core:projects' %}" class="btn btn-outline-primary btn-lg">
                View All Projects <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Tech Stack -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Built With Modern Tech</h2>
            <p class="lead text-muted">Powered by the latest technologies and frameworks</p>
        </div>
        
        <div class="row g-4">
            {% for tech in tech_stacks %}
            <div class="col-lg-2 col-md-3 col-sm-4 col-6">
                <div class="tech-stack-item">
                    {% if tech.icon_url %}
                        <img src="{{ tech.icon_url }}" alt="{{ tech.name }}" class="mb-2" width="48" height="48">
                    {% else %}
                        <i class="fas fa-code fa-3x text-primary mb-2"></i>
                    {% endif %}
                    <h6 class="mb-0">{{ tech.name }}</h6>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Active Developers -->
{% if active_developers %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Amazing Developers</h2>
            <p class="lead text-muted">Meet the talented developers in our community</p>
        </div>
        
        <div class="row g-4">
            {% for developer in active_developers %}
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="card feature-card text-center">
                    <div class="card-body p-4">
                        <img src="{{ developer.profile_picture|default:'/static/img/default-avatar.png' }}" 
                             alt="{{ developer.username }}" 
                             class="rounded-circle mb-3" 
                             width="80" height="80">
                        <h6 class="card-title">{{ developer.get_full_name|default:developer.username }}</h6>
                        <p class="text-muted small">{{ developer.developer_profile.experience_level|title }} Developer</p>
                        
                        {% if developer.skills %}
                        <div class="d-flex flex-wrap justify-content-center gap-1 mb-3">
                            {% for skill in developer.skills|slice:":2" %}
                                <span class="badge bg-light text-dark">{{ skill }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}
                        
                        <div class="d-flex justify-content-center gap-2">
                            {% if developer.github_username %}
                                <a href="https://github.com/{{ developer.github_username }}" class="text-muted" target="_blank">
                                    <i class="fab fa-github"></i>
                                </a>
                            {% endif %}
                            {% if developer.linkedin_profile %}
                                <a href="{{ developer.linkedin_profile }}" class="text-muted" target="_blank">
                                    <i class="fab fa-linkedin"></i>
                                </a>
                            {% endif %}
                            {% if developer.website %}
                                <a href="{{ developer.website }}" class="text-muted" target="_blank">
                                    <i class="fas fa-globe"></i>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-4">
            <a href="{% url 'core:developers' %}" class="btn btn-outline-primary btn-lg">
                View All Developers <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 class="display-6 fw-bold mb-3">Ready to Build Your Crown?</h2>
                <p class="lead mb-0">
                    Join thousands of developers creating amazing projects with our platform. 
                    Start building today and showcase your skills to the world.
                </p>
            </div>
            <div class="col-lg-4 text-end">
                {% if user.is_authenticated %}
                    <a href="{% url 'core:dashboard' %}" class="btn btn-warning btn-lg">
                        <i class="fas fa-tachometer-alt me-2"></i>Go to Dashboard
                    </a>
                {% else %}
                    <a href="{% url 'users:login' %}" class="btn btn-warning btn-lg">
                        <i class="fas fa-crown me-2"></i>Start Building
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Simple hero canvas animation
document.addEventListener('DOMContentLoaded', function() {
    const canvas = document.getElementById('heroCanvas');
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    const particles = [];
    
    // Create particles
    for (let i = 0; i < 50; i++) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 2,
            vy: (Math.random() - 0.5) * 2,
            radius: Math.random() * 3 + 1,
            color: `hsl(${Math.random() * 60 + 200}, 70%, 60%)`
        });
    }
    
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        particles.forEach(particle => {
            // Update position
            particle.x += particle.vx;
            particle.y += particle.vy;
            
            // Bounce off walls
            if (particle.x <= 0 || particle.x >= canvas.width) {
                particle.vx *= -1;
            }
            if (particle.y <= 0 || particle.y >= canvas.height) {
                particle.vy *= -1;
            }
            
            // Draw particle
            ctx.beginPath();
            ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
            ctx.fillStyle = particle.color;
            ctx.fill();
        });
        
        // Draw connections
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
        ctx.lineWidth = 1;
        
        for (let i = 0; i < particles.length; i++) {
            for (let j = i + 1; j < particles.length; j++) {
                const dx = particles[i].x - particles[j].x;
                const dy = particles[i].y - particles[j].y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 100) {
                    ctx.beginPath();
                    ctx.moveTo(particles[i].x, particles[i].y);
                    ctx.lineTo(particles[j].x, particles[j].y);
                    ctx.stroke();
                }
            }
        }
        
        requestAnimationFrame(animate);
    }
    
    animate();
});
</script>
{% endblock %}
